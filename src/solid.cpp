#include "app.hpp"
#include "world.hpp"


namespace {

const uint8_t TILE_DATA[] = {
    0, 1, 24, 0, 17, 0, 0, 0, 0, 210, 125, 44, 255, 133, 149, 161, 255, 117, 113, 97, 255, 89,
    125, 206, 255, 109, 170, 44, 255, 52, 101, 36, 255, 222, 238, 214, 255, 218, 212, 94, 255,
    210, 170, 153, 255, 208, 70, 72, 255, 133, 76, 48, 255, 109, 194, 202, 255, 78, 74, 78,
    255, 68, 36, 52, 255, 48, 52, 109, 255, 20, 12, 28, 255, 0, 14, 1, 4, 0, 8, 7, 97, 4, 11,
    0, 10, 0, 49, 0, 0, 1, 251, 0, 187, 0, 12, 3, 8, 7, 16, 0, 1, 1, 38, 6, 0, 0, 15, 0, 14,
    0, 113, 163, 253, 0, 189, 127, 29, 6, 129, 224, 157, 192, 180, 5, 6, 0, 15, 19, 120, 69,
    127, 253, 129, 216, 125, 15, 1, 4, 128, 248, 133, 240, 129, 68, 3, 8, 7, 0, 143, 224, 157,
    192, 112, 127, 4, 10, 2, 8, 7, 0, 14, 193, 80, 251, 133, 176, 127, 95, 3, 22, 128, 250,
    129, 220, 126, 167, 0, 16, 0, 12, 75, 251, 5, 209, 13, 0, 100, 57, 4, 65, 128, 252, 1,
    217, 126, 175, 129, 252, 129, 232, 133, 70, 1, 12, 131, 248, 133, 240, 115, 95, 129, 248,
    133, 240, 116, 95, 3, 16, 0, 0, 68, 243, 157, 192, 48, 0, 15, 0, 15, 128, 25, 0, 16, 0,
    15, 73, 251, 129, 220, 2, 1, 0, 4, 2, 9, 1, 72, 211, 61, 129, 109, 0, 7, 0, 49, 0, 8, 1,
    24, 0, 12, 1, 12, 0, 9, 129, 4, 0, 5, 193, 0, 0, 2, 193, 0, 4, 0, 193, 0, 0, 1, 97, 0, 3,
    0, 49, 0, 10, 1, 24, 0, 6, 1, 12, 0, 11, 129, 4, 0, 13, 193, 228, 131, 0, 9, 0, 14, 1, 24,
    0, 16, 1, 140, 224, 157, 192, 189, 128, 253, 0, 251, 128, 250, 129, 252, 129, 248, 133,
    240, 141, 224, 157, 192, 189, 128, 253, 0, 251, 128, 250, 129, 252, 1
};

Surface g_tile_surf;

}


Solid::Solid(int x, int y, bool jumpthrough)
    : m_rect{x, y, TILE_SIZE, TILE_SIZE}
    , m_jumpthrough(jumpthrough) {}

void Solid::update() {
    if (!g_tile_surf.pixels()) {
        g_tile_surf.init(TILE_DATA);
    }

}

void Solid::draw() const {
    app::screen.copy(g_tile_surf, {m_jumpthrough * TILE_SIZE, 0, TILE_SIZE, TILE_SIZE},
                     m_rect.x - world::camera.x,
                     m_rect.y - world::camera.y);
}

void Solid::move(int x, int y) {
}
